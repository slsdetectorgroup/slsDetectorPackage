---
# detectors: MYTHEN3
frames:
  infer_action: true # infer action based on actions' argc (they must be unique if true)
  help: "Get or set the number of frames to be collected."
  actions:
    GET:
      require_det_id: true
      argc: 0
      function: getNumberOfFrames
      output: [ OutString(t) ]

    PUT:
      argc: 1
      input: [ 'args[0]' ]
      input_types: [ int ]
      cast_input: [ true ]
      function: setNumberOfFrames
      output: [ 'args[0]' ]


exptime:
  help: ""
  infer_action: false # infer action based on actions' argc (they must be unique if true)
  actions:
    GET:
      require_det_id: true
      function: getExptime
      args:
        - argc: 0
          output: [ OutString(t) ]
        - argc: 1
          output: [ "OutString(t , args[0])" ]
      detectors:
        MYTHEN3:
          function: getExptimeForAllGates
    PUT:
      function: setExptime
      require_det_id: true
      input: [ converted_time ]
      input_types: [ time::ns ]
      args:
        - argc: 1
          separate_time_units:
            input: 'args[0]'
            output: [ converted_time, unit ]
          output: [ 'args[0]' ]
        - argc: 2
          convert_to_time:
            input: [ 'args[0]', 'args[1]' ]
            output:  converted_time
          output: [ 'args[0]', 'args[1]' ]




exptime1:
  inherit_actions: exptime
  actions:
    GET:
      extra_variables:
        - name: gateIndex
          type: int
          value: 0
      input: [ gateIndex ]
      input_types: [ int ]
      detectors:
    PUT:
      extra_variables:
        - name: gateIndex
          type: int
          value: 0
      detectors:
        MYTHEN3:
          input: [ gateIndex,converted_time ]
          input_types: [ int, time::ns ]




exptime2:
  inherit_actions: exptime1
  actions:
    GET:
      extra_variables:
        - name: gateIndex
          type: int
          value: 1
    PUT:
      extra_variables:
        - name: gateIndex
          type: int
          value: 1

exptime3:
  inherit_actions: exptime1
  actions:
    GET:
      extra_variables:
        - name: gateIndex
          type: int
          value: 2
    PUT:
      extra_variables:
        - name: gateIndex
          type: int
          value: 2

